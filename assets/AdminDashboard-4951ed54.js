import{C as J,r as v,c as k,h as O,e as q,o as a,a as l,b as t,j as C,w as y,u as n,F as f,t as D,A as G,I as K,s as Q,v as W,k as g,d as b,f as X,D as Y,n as Z}from"./vendor-5699d02f.js";import{_ as $,B as tt,u as st,a as ot}from"./index-e8cb5d53.js";import"./firebase-76932c27.js";const et={name:"AdminDashboard",components:{BaseButton:tt},setup(){const x=J(),{logout:s}=st(),{getContactSubmissions:V,getVisitorAnalytics:o,getPageViews:M}=ot(),m=v([]),c=v([]),e=v([]),r=v(!0),w=v(null),N=v("newest"),B=v(null),A=k(()=>c.value.length),F=k(()=>m.value.length),S=k(()=>e.value.reduce((i,d)=>i+(d.viewCount||1),0)),L=k(()=>[...m.value].sort((i,d)=>{var h,p;const _=(h=i.timestamp)!=null&&h.toDate?i.timestamp.toDate():new Date(0),u=(p=d.timestamp)!=null&&p.toDate?d.timestamp.toDate():new Date(0);return N.value==="newest"?u-_:_-u})),P=k(()=>[{label:"Total Visitors",value:A.value,change:"+12% this week",trend:"up",color:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",icon:"svg",sectionId:"visitors-section"},{label:"Contact Submissions",value:F.value,change:"+5 new",trend:"up",color:"linear-gradient(135deg, #10B981 0%, #06B6D4 100%)",icon:"svg",sectionId:"contacts-section"},{label:"Total Page Views",value:S.value,change:"+23% this month",trend:"up",color:"linear-gradient(135deg, #F472B6 0%, #FB7185 100%)",icon:"svg",sectionId:"page-views-section"}]),j=async()=>{r.value=!0,w.value=null;try{const[i,d,_]=await Promise.all([V(),o(),M()]);m.value=i,c.value=d,e.value=_}catch(i){w.value="Failed to load data: "+i.message}finally{r.value=!1}},T=i=>{if(!i||!i.toDate)return"Just now";const d=i.toDate(),u=new Date-d,h=Math.floor(u/6e4),p=Math.floor(u/36e5),I=Math.floor(u/864e5);return h<1?"Just now":h<60?`${h}m ago`:p<24?`${p}h ago`:I<7?`${I}d ago`:d.toLocaleDateString()},R=i=>{const d=document.getElementById(i);d&&d.scrollIntoView({behavior:"smooth",block:"start"})},U=i=>{B.value=i},z=()=>{B.value=null},E=i=>{window.location.href=`mailto:${i.email}?subject=Re: ${i.subject}`},H=()=>{s(),x.push("/")};return O(j),{contacts:m,visitors:c,pageViews:e,totalVisitors:A,totalContacts:F,totalPageViews:S,stats:P,isLoading:r,error:w,sortBy:N,sortedContacts:L,selectedContact:B,formatDate:T,loadData:j,logout:H,scrollToSection:R,openContactDetails:U,closeContactDetails:z,replyToContact:E}}},nt={class:"admin-dashboard"},at={class:"dashboard-container"},it={class:"dashboard-header"},lt={class:"header-actions"},rt={key:0,class:"loading-state"},dt={key:1,class:"error-state"},ct={class:"dashboard-stats"},vt=["onClick"],ut={class:"stat-content"},ht={class:"stat-number"},gt={class:"dashboard-content"},mt={class:"dashboard-section contacts-section",id:"contacts-section"},wt={class:"section-header"},_t={class:"header-left"},pt={class:"badge"},kt={class:"header-right"},Ct={key:0,class:"contacts-list"},yt=["onClick"],ft={class:"contact-header"},bt={class:"contact-avatar"},Dt={class:"contact-info"},Bt={class:"contact-email"},xt={class:"contact-date"},Vt={class:"contact-subject"},Mt={class:"contact-message"},Nt={key:1,class:"empty-state"},At={class:"dashboard-sidebar"},Ft={class:"dashboard-section visitors-section",id:"visitors-section"},St={class:"section-header"},jt={class:"badge"},It={key:0,class:"visitors-list"},Lt={class:"visitor-info"},Pt={class:"visitor-location"},Tt={class:"visitor-details"},Rt={key:1,class:"empty-state"},Ut={class:"dashboard-section page-views-section",id:"page-views-section"},zt={class:"section-header"},Et={class:"badge"},Ht={key:0,class:"page-views-list"},Jt={class:"page-view-info"},Ot={class:"page-view-meta"},qt={class:"ip-address"},Gt={key:1,class:"empty-state"},Kt={class:"modal-header"},Qt={class:"modal-body"},Wt={class:"detail-group"},Xt={class:"detail-group"},Yt=["href"],Zt={class:"detail-group"},$t={class:"detail-group"},ts={class:"detail-group full-width"},ss={class:"message-content"},os={class:"modal-footer"};function es(x,s,V,o,M,m){const c=q("BaseButton");return a(),l("div",nt,[t("div",at,[t("header",it,[s[7]||(s[7]=t("div",{class:"header-content"},[t("h1",null,"Admin Dashboard"),t("p",{class:"header-subtitle"},"Monitor your portfolio analytics and visitor insights")],-1)),t("div",lt,[C(c,{variant:"outline",onClick:o.loadData,disabled:o.isLoading},{default:y(()=>s[5]||(s[5]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 4v6h6M23 20v-6h-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),g(" Refresh ",-1)])),_:1,__:[5]},8,["onClick","disabled"]),C(c,{variant:"outline",onClick:o.logout},{default:y(()=>s[6]||(s[6]=[g("Logout",-1)])),_:1,__:[6]},8,["onClick"])])]),o.isLoading?(a(),l("div",rt,s[8]||(s[8]=[t("div",{class:"loading-spinner"},[t("div",{class:"spinner"}),t("p",null,"Loading analytics data...")],-1)]))):o.error?(a(),l("div",dt,[s[10]||(s[10]=t("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),t("p",null,n(o.error),1),C(c,{onClick:o.loadData},{default:y(()=>s[9]||(s[9]=[g("Try Again",-1)])),_:1,__:[9]},8,["onClick"])])):(a(),l(f,{key:2},[t("div",ct,[(a(!0),l(f,null,D(o.stats,(e,r)=>(a(),l("div",{class:"stat-card",key:r,style:b({animationDelay:`${r*.1}s`}),onClick:w=>o.scrollToSection(e.sectionId),role:"button",tabindex:"0"},[t("div",{class:"stat-icon",style:b({background:e.color})},[(a(),X(Y(e.icon)))],4),t("div",ut,[t("h3",null,n(e.label),1),t("p",ht,n(e.value),1),t("span",{class:Z(["stat-trend",e.trend])},n(e.change),3)])],12,vt))),128))]),t("div",gt,[t("div",mt,[t("div",wt,[t("div",_t,[s[11]||(s[11]=t("h2",null,"Recent Contact Submissions",-1)),t("span",pt,n(o.contacts.length)+" total",1)]),t("div",kt,[G(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.sortBy=e),class:"sort-select"},s[12]||(s[12]=[t("option",{value:"newest"},"Newest First",-1),t("option",{value:"oldest"},"Oldest First",-1)]),512),[[K,o.sortBy]])])]),o.sortedContacts.length>0?(a(),l("div",Ct,[(a(!0),l(f,null,D(o.sortedContacts,(e,r)=>(a(),l("div",{key:e.id,class:"contact-item clickable",style:b({animationDelay:`${r*.05}s`}),onClick:w=>o.openContactDetails(e)},[t("div",ft,[t("div",bt,n(e.firstName.charAt(0))+n(e.lastName.charAt(0)),1),t("div",Dt,[t("h4",null,n(e.firstName)+" "+n(e.lastName),1),t("p",Bt,n(e.email),1)]),t("span",xt,n(o.formatDate(e.timestamp)),1)]),t("p",Vt,[s[13]||(s[13]=t("strong",null,"Subject:",-1)),g(" "+n(e.subject),1)]),t("p",Mt,n(e.message),1)],12,yt))),128))])):(a(),l("div",Nt,s[14]||(s[14]=[t("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z",stroke:"currentColor","stroke-width":"2"}),t("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor","stroke-width":"2"})],-1),t("p",null,"No contact submissions yet.",-1)])))]),t("div",At,[t("div",Ft,[t("div",St,[s[15]||(s[15]=t("h2",null,"Recent Visitors",-1)),t("span",jt,n(o.visitors.length)+" total",1)]),o.visitors.length>0?(a(),l("div",It,[(a(!0),l(f,null,D(o.visitors.slice(0,10),(e,r)=>(a(),l("div",{key:e.id,class:"visitor-item",style:b({animationDelay:`${r*.05}s`})},[s[16]||(s[16]=t("div",{class:"visitor-icon"},[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2"}),t("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2"})])],-1)),t("div",Lt,[t("div",Pt,[t("strong",null,n(e.city||"Unknown")+", "+n(e.country||"Unknown"),1)]),t("div",Tt,[t("span",null,n(e.ip),1),t("span",null,n(o.formatDate(e.timestamp)),1)])])],4))),128))])):(a(),l("div",Rt,s[17]||(s[17]=[t("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2"}),t("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2"})],-1),t("p",null,"No visitor data yet.",-1)])))]),t("div",Ut,[t("div",zt,[s[18]||(s[18]=t("h2",null,"Page Views",-1)),t("span",Et,n(o.totalPageViews)+" views",1)]),o.pageViews.length>0?(a(),l("div",Ht,[(a(!0),l(f,null,D(o.pageViews.slice(0,10),(e,r)=>(a(),l("div",{key:e.id,class:"page-view-item",style:b({animationDelay:`${r*.05}s`})},[s[20]||(s[20]=t("div",{class:"page-view-icon"},[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"currentColor","stroke-width":"2"}),t("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"})])],-1)),t("div",Jt,[t("strong",null,n(e.page||"Unknown Page"),1),t("div",Ot,[t("span",qt,n(e.ip||"Unknown IP"),1),s[19]||(s[19]=t("span",{class:"separator"},"•",-1)),t("span",null,n(o.formatDate(e.timestamp)),1)])])],4))),128))])):(a(),l("div",Gt,s[21]||(s[21]=[t("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12",stroke:"currentColor","stroke-width":"2"})],-1),t("p",null,"No page view data yet.",-1)])))])])])],64)),o.selectedContact?(a(),l("div",{key:3,class:"modal-backdrop",onClick:s[4]||(s[4]=(...e)=>o.closeContactDetails&&o.closeContactDetails(...e))},[t("div",{class:"modal-content",onClick:s[3]||(s[3]=Q(()=>{},["stop"]))},[t("div",Kt,[s[22]||(s[22]=t("h3",null,"Contact Details",-1)),t("button",{class:"close-button",onClick:s[1]||(s[1]=(...e)=>o.closeContactDetails&&o.closeContactDetails(...e))},"×")]),t("div",Qt,[t("div",Wt,[s[23]||(s[23]=t("label",null,"From",-1)),t("p",null,n(o.selectedContact.firstName)+" "+n(o.selectedContact.lastName),1)]),t("div",Xt,[s[24]||(s[24]=t("label",null,"Email",-1)),t("p",null,[t("a",{href:"mailto:"+o.selectedContact.email},n(o.selectedContact.email),9,Yt)])]),t("div",Zt,[s[25]||(s[25]=t("label",null,"Date",-1)),t("p",null,n(o.formatDate(o.selectedContact.timestamp)),1)]),t("div",$t,[s[26]||(s[26]=t("label",null,"Subject",-1)),t("p",null,n(o.selectedContact.subject),1)]),t("div",ts,[s[27]||(s[27]=t("label",null,"Message",-1)),t("div",ss,n(o.selectedContact.message),1)])]),t("div",os,[C(c,{onClick:o.closeContactDetails},{default:y(()=>s[28]||(s[28]=[g("Close",-1)])),_:1,__:[28]},8,["onClick"]),C(c,{variant:"primary",onClick:s[2]||(s[2]=e=>o.replyToContact(o.selectedContact))},{default:y(()=>s[29]||(s[29]=[g("Reply via Email",-1)])),_:1,__:[29]})])])])):W("",!0)])])}const ls=$(et,[["render",es],["__scopeId","data-v-7c46c478"]]);export{ls as default};
//# sourceMappingURL=AdminDashboard-4951ed54.js.map
