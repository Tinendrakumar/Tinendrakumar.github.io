import{B as P,r,c as p,h as L,e as S,o as n,a as i,b as t,i as A,w as M,t as a,F as u,s as j,p as m,j as v,u as b}from"./vendor-be36cf19.js";import{_ as F,B as R,u as T,a as U}from"./index-e7e76fc9.js";import"./firebase-76932c27.js";const H={name:"AdminDashboard",components:{BaseButton:R},setup(){const w=P(),{logout:s}=T(),{getContactSubmissions:k,getVisitorAnalytics:e,getPageViews:y}=U(),c=r([]),l=r([]),o=r([]),h=r(!0),_=r(null),f=p(()=>l.value.length),V=p(()=>c.value.length),C=p(()=>o.value.reduce((d,g)=>d+(g.viewCount||1),0)),D=async()=>{h.value=!0;try{const[d,g,N]=await Promise.all([k(),e(),y()]);c.value=d,l.value=g,o.value=N,_.value=null}catch(d){_.value="Failed to load data: "+d.message}finally{h.value=!1}},B=d=>!d||!d.toDate?"Just now":d.toDate().toLocaleString(),x=()=>{s(),w.push("/")};return L(D),{contacts:c,visitors:l,pageViews:o,totalVisitors:f,totalContacts:V,totalPageViews:C,isLoading:h,error:_,formatDate:B,logout:x}}},I={class:"admin-dashboard"},z={class:"dashboard-container"},E={class:"dashboard-header"},J={class:"header-actions"},q={key:0,class:"loading-state"},G={key:1,class:"error-state"},K={class:"dashboard-stats"},O={class:"stat-card"},Q={class:"stat-content"},W={class:"stat-number"},X={class:"stat-card"},Y={class:"stat-content"},Z={class:"stat-number"},$={class:"stat-card"},tt={class:"stat-content"},st={class:"stat-number"},ot={class:"dashboard-content"},at={class:"dashboard-section"},et={key:0,class:"contacts-list"},nt={class:"contact-header"},it={class:"contact-date"},dt={class:"contact-email"},lt={class:"contact-subject"},rt={class:"contact-message"},ct={key:1,class:"empty-state"},ut={class:"dashboard-section"},vt={key:0,class:"visitors-list"},ht={class:"visitor-info"},_t={class:"visitor-location"},gt={class:"visitor-details"},pt={key:1,class:"empty-state"},mt={class:"dashboard-section"},wt={key:0,class:"page-views-list"},kt={class:"page-view-info"},yt={key:0},bt={key:1},ft={class:"page-view-date"},Vt={key:1,class:"empty-state"};function Ct(w,s,k,e,y,c){const l=S("BaseButton");return n(),i("div",I,[t("div",z,[t("header",E,[s[1]||(s[1]=t("h1",null,"Admin Dashboard",-1)),t("div",J,[A(l,{variant:"outline",onClick:e.logout},{default:M(()=>s[0]||(s[0]=[v("Logout",-1)])),_:1,__:[0]},8,["onClick"])])]),e.isLoading?(n(),i("div",q,"Loading data...")):e.error?(n(),i("div",G,a(e.error),1)):(n(),i(u,{key:2},[t("div",K,[t("div",O,[s[3]||(s[3]=j('<div class="stat-icon" data-v-d667115d><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d667115d><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" data-v-d667115d></path><circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" data-v-d667115d></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2" data-v-d667115d></path><path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" data-v-d667115d></path></svg></div>',1)),t("div",Q,[s[2]||(s[2]=t("h3",null,"Total Visitors",-1)),t("p",W,a(e.totalVisitors),1)])]),t("div",X,[s[5]||(s[5]=t("div",{class:"stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z",stroke:"currentColor","stroke-width":"2"}),t("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor","stroke-width":"2"})])],-1)),t("div",Y,[s[4]||(s[4]=t("h3",null,"Contact Submissions",-1)),t("p",Z,a(e.totalContacts),1)])]),t("div",$,[s[7]||(s[7]=t("div",{class:"stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12",stroke:"currentColor","stroke-width":"2"})])],-1)),t("div",tt,[s[6]||(s[6]=t("h3",null,"Total Page Views",-1)),t("p",st,a(e.totalPageViews),1)])])]),t("div",ot,[t("div",at,[s[10]||(s[10]=t("h2",null,"Recent Contact Submissions",-1)),e.contacts.length>0?(n(),i("div",et,[(n(!0),i(u,null,m(e.contacts.slice(0,5),o=>(n(),i("div",{key:o.id,class:"contact-item"},[t("div",nt,[t("h4",null,a(o.firstName)+" "+a(o.lastName),1),t("span",it,a(e.formatDate(o.timestamp)),1)]),t("p",dt,a(o.email),1),t("p",lt,[s[8]||(s[8]=t("strong",null,"Subject:",-1)),v(" "+a(o.subject),1)]),t("p",rt,a(o.message),1)]))),128))])):(n(),i("div",ct,s[9]||(s[9]=[t("p",null,"No contact submissions yet.",-1)])))]),t("div",ut,[s[14]||(s[14]=t("h2",null,"Recent Visitors",-1)),e.visitors.length>0?(n(),i("div",vt,[(n(!0),i(u,null,m(e.visitors.slice(0,10),o=>(n(),i("div",{key:o.id,class:"visitor-item"},[t("div",ht,[t("div",_t,[t("strong",null,a(o.city||"Unknown")+", "+a(o.country||"Unknown"),1)]),t("div",gt,[t("span",null,a(o.ip),1),s[11]||(s[11]=v(" - ",-1)),t("span",null,a(o.platform),1),s[12]||(s[12]=v(" - ",-1)),t("span",null,a(e.formatDate(o.timestamp)),1)])])]))),128))])):(n(),i("div",pt,s[13]||(s[13]=[t("p",null,"No visitor data yet.",-1)])))]),t("div",mt,[s[16]||(s[16]=t("h2",null,"Recent Page Views",-1)),e.pageViews.length>0?(n(),i("div",wt,[(n(!0),i(u,null,m(e.pageViews.slice(0,10),o=>(n(),i("div",{key:o.id,class:"page-view-item"},[t("div",kt,[t("strong",null,a(o.page||"Unknown Page"),1),o.ip?(n(),i("span",yt," — IP: "+a(o.ip),1)):b("",!0),o.url?(n(),i("span",bt," — "+a(o.url),1)):b("",!0),t("span",null," — "+a(o.viewCount||1)+" view(s)",1),t("span",ft," — "+a(e.formatDate(o.timestamp)),1)])]))),128))])):(n(),i("div",Vt,s[15]||(s[15]=[t("p",null,"No page view data yet.",-1)])))])])],64))])])}const Nt=F(H,[["render",Ct],["__scopeId","data-v-d667115d"]]);export{Nt as default};
//# sourceMappingURL=AdminDashboard-22490238.js.map
